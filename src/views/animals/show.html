<head>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
</head>

<div class='columns is-multiline is-centered'>
  <div class='column is-8 container profile'>
    <div class='section profile-heading'>
      <div class='columns is-mobile is-multiline'>
        <div class='column is-3'>
          <span class='header-icon user-profile-image'>
            <img class='is-rounded' alt='' ng-src="{{ animal.imageUrl }}" alt="{{ animal.name }}">
          </span>
        </div>
<!-- Pet Header -->
        <div class="column is-9">
          <div class='column is-12 name'>
            <p>
              <span class='title is-bold'>{{ animal.name }}</span>
              <i class="fas fa-{{animal.species.toLowerCase()}}"></i>
              {{ animal.species.toLowerCase() }}
              <br>
            </p>
            <p class='tagline'>
              <strong>{{ animal.species }}  |  {{ animal.age }}  |  <span ng-repeat="color in animal.color">{{ color }}</span></strong><br>
              <em> <span ng-repeat="breed in animal.breed">{{ breed }}</span></em><br>
              My Human: <a ui-sref="usersShow({ id: animal.owner._id})">{{ animal.owner.username }}</a>
            </p>
            <div class="button"><a ui-sref="bookingIndex({ id: animal._id })">Bookings</a>
            </div>
          </div>
          <div class="columns is-multiline">

<!--Holidays -->
            <div class='column is-4 has-text-centered'>
              <p class='stat-val'>{{ animal.bookings.length }}</p>
              <p class='stat-key'><a ui-sref="bookingIndex({ id: animal._id })">bookings</a></p>
            </div>

<!--Reviews -->
            <div class='column is-4 has-text-centered'>
              <p class='stat-val'>99</p>
              <p class='stat-key'><a href="#">reviews</a></p>
            </div>

<!--Star Rating -->
            <div class='column is-4 has-text-centered'>
              <p class='stat-val'>{{ animal.meanRating }} ⭐️</p>
              <p class='stat-key' ng-if="animal.meanRating <= 2"><a href="#"></a>Bad {{ animal.sex }}</p>
              <p class='stat-key' ng-if="animal.meanRating >2 && animal.meanRating <3.5"><a href="#"></a>Good {{ animal.sex }}</p>
              <p class='stat-key' ng-if="animal.meanRating >3.5"><a href="#"></a>Really Good {{ animal.sex }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class='columns is-multiline is-centered'>
  <div class="column is-1"></div>
  <div class="column is-5">
<!-- Bio -->
    <h3 class="subtitle is-3">About {{ animal.name }}</h3>
    <div>
      My name is {{ animal.name }} the {{ animal.species }} and I belong to {{ animal.owner.givenName }}.
      I am a {{ animal.age }}-year-old {{ animal.colour }} <span ng-repeat="breed in animal.breed">{{ breed }}</span>.
      I live in {{ animal.location }}<br>
      {{ animal.bio }}
    </div>
<!-- Edit & Delete Buttons -->
    <div>
      <form>
        <button class="button" ng-if="isAuthenticated() && animal.owner._id === userId" ui-sref="animalsEdit({ id: animal._id })">Edit</button>
        <button class="button" ng-if="isAuthenticated() && animal.owner._id === userId" ng-click="handleDelete()">Delete</button>
      </form>
    </div>

<!-- Comments -->
    <div class="comments">
      <h5 class="subtitle is-5">Comments</h5>
      <div ng-repeat="comment in animal.comments">
        <span style="font-weight:bold;">{{ comment.user.username }}</span>
        <span>{{ comment.text }}</span>
        <button ng-if="isAuthenticated() && comment.user._id === userId" class="delete-button" ng-click="deleteComment(comment)">x</button>
      </div>




<!-- Comment Form -->
  <div ng-if="isAuthenticated()" class="">
    <h6 class="subtitle is-6">Add a Comment</h6>
    <form ng-submit="createComment()">
      <textarea name="text" ng-model="comment.text" class="textarea"></textarea>
      <button class="button">Comment</button>
    </form>
  </div>
  </div>
  </div>

  <div class="column is-5"> </div>
  <div class="column is-1"> </div>

</div>
