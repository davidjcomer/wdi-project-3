<div class='columns is-multiline is-centered'>
  <div class='column is-10 container profile'>
    <div class='section profile-heading'>
      <div class='columns is-mobile is-multiline'>
        <div class='column is-3'>
          <span class='header-icon user-profile-image'>
            <img class='is-rounded' alt='' ng-src="{{ animal.imageUrl }}" alt="{{ animal.name }}">
          </span>
          <div class="button"><a ui-sref="bookingNew({ id: animal._id})">Book {{ animal.name }}</a>
          </div>
        </div>

<!-- Pet Header-->
        <div class="column is-9">
          <div class="columns">
<!-- Pet Header Left-->
          <div class='column is-3'>
            <div>
              <span class='title is-bold'>{{ animal.name }}</span><br>
              <em><span ng-repeat="color in animal.color"><span style="color: {{ color }}; border: solid 1px black; border-radius: 50%; background-color:{{ color }};">.......</span>  </span></em><br>
              <br>
                <p class='tagline'>
                  <i class="fas fa-{{animal.species.toLowerCase()}}"></i>
                  <em><span ng-repeat="breed in animal.breed">{{ breed }} </span></em><br>
                </p>
            </div>
          </div>

<!-- Pet Header Right-->
          <div class='column is-9'>
            <div class="columns is-multiline">
              <div class='column is-12'>
                <p>{{ animal.bio }}</p>
              </div>
              <div class='column is-3 is-cent'>
                <i class="fas fa-map-pin"></i><br>
                <strong><a href="#">{{animal.location}}</a></strong>
              </div>
              <div class='column is-3 is-centered'>
                <i class="fas fa-user"></i><br>
                <a ui-sref="usersShow({ id: animal.owner._id})">{{ animal.owner.username }}</a><br>
              </div>
              <div class='column is-3 is-centered'>
                <span>
                  <a ui-sref="usersShow({ id: animal.owner._id})">
                    <img height="45px" width="45px" style="border-radius: 50%;" class='is-rounded' alt='' ng-src="{{ animal.owner.profileImageUrl }}" alt="{{ animal.owner.username }}">
                  </a>
                </span>
              </div>
            </div>
          </div>
        </div>


<!--Stat Bar -->
          <div class="columns is-multiline">

<!--Bookings -->
            <div class='column is-4 has-text-centered'>
              <p class='stat-val'>{{ animal.bookings.length }}</p>
              <p class='stat-key'><a ui-sref="bookingIndex({ id: animal._id })">bookings</a></p>
            </div>

<!--Reviews -->
            <div class='column is-4 has-text-centered'>
              <p class='stat-val'>99</p>
              <p class='stat-key'><a href="#">reviews</a></p>
            </div>

<!--Star Rating -->
            <div class='column is-4 has-text-centered'>
              <p class='stat-val'>{{ animal.meanRating }} ⭐️</p>
              <p class='stat-key' ng-if="animal.meanRating <= 2"><a href="#"></a>Bad {{ animal.sex }}</p>
              <p class='stat-key' ng-if="animal.meanRating >2 && animal.meanRating <3.5"><a href="#"></a>Good {{ animal.sex }}</p>
              <p class='stat-key' ng-if="animal.meanRating >3.5"><a href="#"></a>Really Good {{ animal.sex }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class='columns is-multiline is-centered'>
  <div class="column is-1"></div>

  <!-- Split Screen Left -->
  <div class="column is-5">
<!-- Bio -->
    <h3 class="subtitle is-3">About {{ animal.name }}</h3>

    <p>
    My name is {{ animal.name }} the {{ animal.species }} and I belong to <a ui-sref="usersShow({ id: animal.owner._id})">{{ animal.owner.givenName }}</a></p>
    <p>I am a {{ animal.age }}-year-old <span ng-repeat="breed in animal.breed">{{ breed }}</span>.
    I live in {{ animal.location }}</p>
    <p>{{ animal.bio }}</p>

    <div>
      <button ng-if="animal.ownedBy._id === userId" ng-if="isAuthenticated()" ui-sref="animalsEdit({ id: animal._id })">Edit</button>
      <button ng-if="animal.ownedBy._id === userId" ng-if="isAuthenticated()" ng-click="handleDelete()">Delete</button>
    </div>

<!-- Edit & Delete Buttons -->
    <div>
      <form>
        <button class="button" ng-if="isAuthenticated() && animal.owner._id === userId" ui-sref="animalsEdit({ id: animal._id })">Edit</button>
        <button class="button" ng-if="isAuthenticated() && animal.owner._id === userId" ng-click="handleDelete()">Delete</button>
      </form>
    </div>

<!-- Comments -->
    <div class="comments">
      <h5 class="subtitle is-5">Comments</h5>
      <div ng-repeat="comment in animal.comments">
        <span style="font-weight:bold;">{{ comment.user.username }}</span>
        <span>{{ comment.text }}</span>
        <button ng-if="isAuthenticated() && comment.user._id === userId" class="delete-button" ng-click="deleteComment(comment)">x</button>
      </div>

<!-- Comment Form -->
      <div ng-if="isAuthenticated()" class="">
      <h6 class="subtitle is-6">Add a Comment</h6>
        <form ng-submit="createComment()">
          <textarea name="text" ng-model="comment.text" class="textarea"></textarea>
          <button class="button">Comment</button>
        </form>
      </div>
  </div>
</div>


<!-- Split Screen Right -->
  <div class="column is-5">
    <!-- Bookings -->
      <h3 class="subtitle is-3">{{ animal.name }}'s Bookings</h3>

      <div class="columns column is-12">
        <div class="column is-6">
          <p>Pending</p>
          <div ng-repeat="booking in animal.bookings">
            <div ng-if="booking.status === 'pending'">
              <p><strong>Human:</strong><a ui-sref="usersShow({ id: booking.booker._id})">{{ booking.booker.givenName}}</a></p>
              <p><strong>Pickup:</strong> {{ booking.pickup }}</p>
            </div>
          </div>
        </div>

        <div class="column is-6">
          <p>Completed</p>
          <div ng-repeat="booking in animal.bookings">
            <div ng-if="booking.status === 'complete'">
              <p><strong>Human:</strong> <a ui-sref="usersShow({ id: booking.booker._id})">{{ booking.booker.givenName}}</a></p>
              <p><strong>Completed:</strong> {{ booking.dropoff }}</p>
            </div>
          </div>
        </div>

  </div>
  <div class="column is-1"> </div>

</div>
